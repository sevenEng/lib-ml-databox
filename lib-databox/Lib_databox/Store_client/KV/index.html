<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>KV (lib-databox.Lib_databox.Store_client.KV)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../index.html">lib-databox</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Lib_databox.Store_client.KV</span></h1></header><div class="doc"><p>A key-value store implementation which fulfills <a href="../module-type-KV_SIG/index.html">KV_SIG</a></p></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"></div></div><div class="spec val" id="val-create"><a href="#val-create" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>create : endpoint:string <span class="keyword">&#8209;&gt;</span> <a href="../../Utils/index.html#type-databox_ctx">Utils.databox_ctx</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;logging:bool <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code class="code">create store_uri ctx ?logging ()</code> creates a key-value store instance.
<code class="code">store_uri</code> could be read from <a href="../../Utils/index.html#val-store_endpoint">Utils.store_endpoint</a>, <code class="code">ctx</code> could be returned
from <a href="../../Utils/index.html#val-databox_init">Utils.databox_init</a>, <code class="code">logging</code> defaults to <code class="code">false</code>.</p></div></div><div class="spec val" id="val-register_datasource"><a href="#val-register_datasource" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>register_datasource : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> meta:<a href="../../Store_datasource/index.html#type-meta">Store_datasource.meta</a> <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"><p><code class="code">register_datasource t ~meta</code> registers a datasource described by <code class="code">meta</code>
with store <code class="code">t</code>.</p></div></div><div class="spec val" id="val-get_datasource_catalogue"><a href="#val-get_datasource_catalogue" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_datasource_catalogue : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string Lwt.t</code></div><div class="doc"><p><code class="code">get_datasource_catalogue t</code> retrieves a summury of all datasources
registered with store <code class="code">t</code>.</p></div></div><h2>Store data function</h2><div class="spec val" id="val-write"><a href="#val-write" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>write : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> datasource_id:string <span class="keyword">&#8209;&gt;</span> payload:<a href="../index.html#type-content">content</a> <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"></div></div><h2>Load data functions</h2><div class="spec val" id="val-read"><a href="#val-read" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>read : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> datasource_id:string <span class="keyword">&#8209;&gt;</span> ?&#8288;format:<a href="../index.html#type-content_format">content_format</a> <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> <a href="../index.html#type-content">content</a> Lwt.t</code></div><div class="doc"></div></div><div class="spec val" id="val-observe"><a href="#val-observe" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>observe : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> datasource_id:string <span class="keyword">&#8209;&gt;</span> ?&#8288;timeout:int <span class="keyword">&#8209;&gt;</span> ?&#8288;format:<a href="../index.html#type-content_format">content_format</a> <span class="keyword">&#8209;&gt;</span> unit <span class="keyword">&#8209;&gt;</span> <a href="../index.html#type-content">content</a> Lwt_stream.t Lwt.t</code></div><div class="doc"><p><code class="code">observe t ~datasource_id ?timeout ?format ()</code> returns a stream from which any update on
the value associated with <code class="code">datasource_id</code> is returned.</p><p><code class="code">timeout</code> defaults to 0, which means observing until <a href="../module-type-KV_SIG/index.html#val-stop_observing">KV_SIG.stop_observing</a> is called,
unit is seconds. <code class="code">format</code> defaults to `Json.</p></div></div><div class="spec val" id="val-stop_observing"><a href="#val-stop_observing" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>stop_observing : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> datasource_id:string <span class="keyword">&#8209;&gt;</span> unit Lwt.t</code></div><div class="doc"></div></div></body></html>